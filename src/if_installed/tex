#!/usr/bin/env zsh
# ====================[ tex                                ]====================
#                     [ Time-stamp: "2009-04-18 19:29:36 leycec" ]
#
# --------------------( SYNOPSIS                           )--------------------
# Zeshy TeX, implementing [La|Xe]TeX functionality.

# ....................{ ALIASES                            }....................
interactive_alias latex='latex -interaction=batchmode'
interactive_alias pdflatex='pdflatex -interaction=batchmode'

# ....................{ TEX                                }....................
# void tex_recache_paths(void)
# 
# Recursively update TeX path caches with the current contents of all
# directories on the TeX PATH.
tex_recache_paths() {
    die_if_args
#   run_as_superuser update-texmf
    run_as_superuser texhash 
}

# ....................{ TEXLIVE                            }....................
#FIXME: Shift this into a separate "tlmgr" script.
# Aliases.
alias tli="tlmgr install"

# void set_texlive_mirror(string url)
# 
# Set the remote TeXLive mirror to be used for installing and updating packages.
# Defaults to the mirror redirected to by
# "http://mirror.ctan.org/systems/texlive/tlnet", which is usually better than
# you can do yourself.
set_texlive_mirror() {
    die_unless_at_most_one_arg 'expected at most one URL'

    string url
    if [[ ${#} -eq 1 ]]; then
        url="${1}"
    else
        utter "resolving mirror redirection..."
        zimport zeshy/command/wget
        url=$(wget_resolve_url 'http://mirror.ctan.org/systems/texlive/tlnet')
    fi

    tlmgr option repository "${url}"
}

#FIXME: Obsolete.
#FIXME: ...this could definitely use some work.
# void install_texlive(void)
# 
# Manually install TeXLive for those distributions still lacking viable packages
# (e.g., Exherbo).
#install_texlive() {
#    die_if_args
#    /tmp/texlive/install-tl-*/install-tl\
#        -no-gui\
#        -repository 'http://elena.aut.ac.nz/ctan/systems/texlive/tlnet'
#}

# void install_biblatex(void)
#
# Install BibLaTeX under TeXLive 2010.
#install_biblatex() {
#   tlmgr install bilatex
#   tlmgr install biber
#   tlmgr --repository http://tlcontrib.metatex.org/2010 install biber
#}

# --------------------( COPYRIGHT AND LICENSE              )--------------------
# The information below applies to everything in this distribution,
# except where noted.
#              
# Copyright 2007-2012 by Cecil Curry.
#   
#   http://www.raiazome.com
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program. If not, see <http://www.gnu.org/licenses/>.
