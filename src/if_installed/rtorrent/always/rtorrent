#!/usr/bin/env zsh
# ====================[ rtorrent                           ]====================
#
# --------------------( LICENSE                            )--------------------
# Copyright 2007-2012 by Cecil Curry.
# See "COPYING" for additional details.
#
# --------------------( SYNOPSIS                           )--------------------
# Zeshy rtorrent.
#
# --------------------( TODO                               )--------------------
# * Support alternative screen muxers as well (e.g., "tmux").

# ....................{ ALIASES                            }....................
is_zeshy_wrapping_core_commands and
interactive_alias rtorrent='screenify rtorrent'
interactive_alias rt='rtorrent'

# --------------------( WASTELANDS                         )--------------------
#   if is_superuser "${username}"; then
#       string pid_file_dir
#       pid_file_dir="$(get_first_writable_dir '/run' '/var/run')"
#       sputter "${pid_file_dir}/${command_name}"
#   else
#       sputter "${ZESHY_USER_PID_DIR}/${command_name}"
#   fi

    # Get Zeshy's dot directory.
#   string home zeshy_dot_dir
#   home="$(get_home "${username}")"
#   zeshy_dot_dir="${home}/${ZESHY_DOT_DIR_BASENAME}"

    # Return such directory, if found.
#   die_unless_writable_dir "${zeshy_dot_dir}"
#   sputter "${zeshy_dot_dir}"
# Absolute path of the file persisting the running "rtorrent" process ID (PID).
#FIXME: This looks good. But we need to implement it, first! Which means,
#transitively, we need a die_unless_user() function. Here's the trivial
#awk-based implementation:
#
#  awk -F":" '{ print $1 }' /etc/passwd
#
#Of course, we then need a get_users_file() function. And then, since we'd
#rather implement a pure-Zsh solution, we'd like to implement a function:
#
#string split_columns_from_lines(string text, string column_separator)
#
#I'm pretty sure we can implement this by splitting text into a list of lines
#and running a single parameter expansion on such list (possibly also locally
#setting "IFS=':'"), which Zsh *SHOULD* apply to each list member. If we can't
#do this and instead have...

#global_string ZESHY_RTORRENT_PID_FILE="$(get_pid_file "${ZESHY_RTORRENT_USER}" rtorrent)"

#if is "${RTORRENT_USER}" == root si
#then ZESHY_RTORRENT_PIDFILE="/var/run/rtorrent.pid"
#else ZESHY_RTORRENT_PIDFILE="/home/${RTORRENT_USER}/.rtorrent.pid"
#fi
