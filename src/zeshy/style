#!/usr/bin/env zeshy
# ====================[ style                              ]====================
#                     [ Time-stamp: "2009-04-18 19:29:36 leycec" ]
#
# --------------------( SYNOPSIS                           )--------------------
# Zeshy Style. This Zeshy component implements Zsh style definitions, especially
# style definitions configuring the completion subsystem.

# ....................{ COMPLETIONS                        }....................
# Colorize "ls" and make the "$LS_COLORS" variable available.
is_runnable dircolors && eval "$(dircolors --sh)"

# ....................{ COMPLETIONS                        }....................
# To install and configure completions by menu, rather than hand, run:
#    compinstall

zstyle ':completion:*' completer _oldlist _complete _match _approximate _prefix
zstyle ':completion:*' expand suffix
zstyle ':completion:*' format '[completing %d}'
zstyle ':completion:*' ignore-parents parent pwd
zstyle ':completion:*' insert-unambiguous true
zstyle ':completion:*' list-colors ''
zstyle ':completion:*' list-prompt %SAt %p: Hit tab for more, or the character to insert%s
zstyle ':completion:*' match-original both
zstyle ':completion:*' max-errors 1
zstyle ':completion:*' menu select=long-list select=0
zstyle ':completion:*' prompt '[corrected %e}'
zstyle ':completion:*' select-prompt %SScrolling active: current selection at %p%s
zstyle ':completion:*' verbose true

# Match case-insensitively.
zstyle ':completion:*' matcher-list '' 'm:{a-z}={A-Z}' 'r:|[._-]=** r:|=**'

# Use an active menu, rather than passive list, for tab completions.
zstyle ':completion:*' menu select=2

# Colorize tab completions.
zstyle ':completion:*:default' list-colors ${(s.:.)LS_COLORS}
#zstyle ':completion:*' list-colors ${(s.:.)LS_COLORS}
#zstyle ':completion:*:*:kill:*:processes' list-colors '=(#b) #([0-9]#)*=0=01;31'

# Cache tab completions, so as to improve tab completion responsivity.
zstyle ':completion::complete:*' use-cache on
zstyle ':completion::complete:*' cache-path "${ZSH_COMPLETION_CACHE_PATH}"

# Ignore completion functions for commands we don't have.
zstyle ':completion:*:functions' ignored-patterns '_*'

# When tab completing pathnames, strip the trailing slash. (Nice for "ln".)
zstyle ':completion:*' squeeze-slashes true

# ....................{ COMPLETIONS ~ commands             }....................
# Improve "killall" completion.
zstyle ':completion:*:killall:*' command 'ps -u $USER -o cmd'

# When tab completing for "cd", ignore the current and parent paths.
# zstyle ':completion:*:cd:*' ignore-parents parent pwd

# ....................{ MAIN                               }....................
# Initialize completions after defining all completions above. It is especially
# important this be done after defining the cache path, otherwise logging in as
# root ejaculates the following interactive error:
# 
#     zsh compinit: insecure directories, run compaudit for list.
#     Ignore insecure directories and continue [y] or abort compinit [n]?
compinit -i -d "${ZSH_COMPINIT_DUMP_FILE}"

# --------------------( COPYRIGHT AND LICENSE              )--------------------
# The information below applies to everything in this distribution,
# except where noted.
#              
# Copyleft 2007-2010 by Cecil Curry.
#   
#   http://www.raiazome.com
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program. If not, see <http://www.gnu.org/licenses/>.
