#!/usr/bin/env zsh

declare_parcel_as_script_with_stdin <<'/---'
Configure `zeshy`-specific `git` functionality.
/---

# ....................{ ALIASES                            }....................
# See "00-core/alias" for further details.

ZESHY_ALIAS_CLI_ABBREVIATIONS+=(
    # Basic actions.
    {gitcl}one  'git clone'
    {gitd}iff   'git diff'
    {gitl}og    'git log'
    {gitp}u{l}l 'git pull'
    {gitp}u{s}h 'git push'
    {gits}tatus 'git status'

    # Add.
    {gita}dd      'git add'
    {gita}dd{a}ll 'git add --all'

    # Commit.
    {gitc}ommit             'git commit'
    {gitc}ommit{a}ll        'git commit --all'
    {gitc}ommit{a}ll{a}mend 'git commit --all --amend'

    # Grep.
    {gitg}rep       ':grep_git_with_options'
    {gitg}rep{r}oot ':grep_git_root_with_options'

    # Rebase.
    {gitr}ebase{c}ontinue    'git rebase --continue'
    {gitr}ebase{i}nteractive 'git rebase --interactive'

    # Correct "Merged from..." commits implicitly produced by non-conflicting
    # merges. (Rather useful.)
    {gitr}ebase{o}rigin 'git rebase origin'

    # Interactively rebase all commits committed since the last push to the remote
    # repository. (This is the common case.)
    {gitr}ebase{i}nteractive{o}rigin 'git rebase --interactive'
)

# ....................{ OPTIONS                            }....................
declare_global_with_stdin list ZESHY_OPTIONS_GIT_GREP <<'/---'
`git grep` options for `zeshy`-specific greppers (e.g., :grep_git()).
/---
ZESHY_OPTIONS_GIT_GREP=(
    -I
    --perl-regexp
)

declare_global_with_stdin list ZESHY_OPTIONS_GIT_GREP_IF_INTERACTIVE <<'/---'
`git grep` options when run interactively.
/---
ZESHY_OPTIONS_GIT_GREP_IF_INTERACTIVE=(
    --break
    --color=always
    --heading
    --line-number

    # Uncomment to print one line of context both above and below matched lines.
    #--context 1
)

declare_global_with_stdin list ZESHY_OPTIONS_GIT_GREP_IF_NONINTERACTIVE <<'/---'
`git grep` options when run non-interactively.
/---
ZESHY_OPTIONS_GIT_GREP_IF_NONINTERACTIVE=(
    --color=never
)
