#!/usr/bin/env zsh
# --------------------( LICENSE                            )--------------------
# Copyright 2007-2013 by Cecil Curry.
# See "COPYING" for additional details.

declare_parcel_as_script_with_stdin <<'/---'
Handle core map aliases.
/---

# ....................{ DECLARATORS                        }....................
declare_function_with_stdin <<'/---'
void localize_map(string map_name)

Localize the passed map into local string variables in the caller's context. For
each key of such map, define a local string variable whose name is such key
suffixed by `__lm` and whose value is such key's value. Since keys are arbitrary
strings and variable names must match ${ZESHY_VARIABLE_NAME_GLOB} and hence are
_not_ arbitrary strings, an exception is thrown if any key is _not_ a valid
variable name: e.g.,

.localize_map()
==========================================
[source]
------------------------------------------
>>> map on_decentralization; on_decentralization=\
...    "Well"         "to begin with we don't fight wars or prepare for them."
...    "Consequently" "we have no need for conscription, or military"
...    "hierarchies"  "or a unified command. Then there's our economic system:"
...    "it"    "doesn't permit anybody to become more than four or five times"
...    "as"    "rich as the average. That means that we don't have any captains"
...    "of"    "industry or omnipotent financiers. Better still, we have no"
...    "omnipotent" "politicians or bureaucrats. Pala's a federation of self-"
...    "governing"  "units, geographical units, professional units, economic"
...    "units" "— so there's plenty of scope for small-scale initiative and"
...    "democratic" "leaders, but no place for any kind of dictator at the"
...    "head"  "of a centralized government. Another point: we have no"
...    "established" "church, and our religion stresses immediate experience"
...    "and"   "deplores belief in unverifiable dogmas and the emotions which"
...    "that"  "belief inspires. So we're preserved from the plagues of popery,"
...    "on"    "the one hand, and fundamentalist revivalism, on the other. And"
...    "along" "with transcendental experience we systematically cultivate"
...    "skepticism"  "Discouraging children from taking words too seriously,"
...    "teaching"    "them to analyse whatever they hear or read — this is an"
...    "integral"    "part of the school curriculum. Result: the eloquent"
...    "rabble"      "rouser, like Hitler or our neighbour across the Strait,"
...    "Colonel"     "Dipa, just doesn't have a chance here in Pala." )
>>> localize_map on_decentralization
>>> print_string "${omnipotent__lm}"
politicians or bureaucrats. Pala's a federation of self-
>>> print_string "${skepticism__lm}"
Discouraging children from taking words too seriously,
------------------------------------------
==========================================
/---
alias localize_map='{
    string map_name__lm; set_string_to_stdin map_name__lm
    die_unless_map "${map_name__lm}"

    #FIXME: Implement me! Not terribly hard; just do it.
} <<<'

# --------------------( WASTELANDS                         )--------------------
