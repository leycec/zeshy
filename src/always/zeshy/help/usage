#!/usr/bin/env zsh
# ====================[ usage                              ]====================
#
# --------------------( LICENSE                            )--------------------
# Copyright 2007-2013 by Cecil Curry.
# See "COPYING" for additional details.
#
# --------------------( SYNOPSIS                           )--------------------
# Handle usage messages, typically in response to CLI options "-h" and "--help".

# ....................{ PRINTERS                           }....................
declare_function '
string print_zeshy_help_usage(void)

Print a human-readable synopsis of all command-line options accepted by the
"zeshy" wrapper script.
'
function print_zeshy_help_usage() {
    # Validate sanity.
    die_if_args

    #FIXME: Option printing is somewhat cumbersome and certainly repetitive. It
    #would be advantageous to abstract such printing into a series of arrays
    #iteractively parsed to dynamically construct such output. Probably easiest
    #to harvest the set of such options from actual output rather than the
    #implementation below, for obvious reasons!
    #FIXME: Actually, it'd be great to abstract this into a template callable by
    #third-party Zeshy scripts for use in printing help usage. The great thing
    #about that is the consistency of output: all Zeshy scripts including Zeshy
    #itself would share the same help output format. In such case, perhaps
    #rename "print_zeshy_help_usage" everywhere to simply print_usage(), yes?
    #We'll have to contemplate the data structure format. It certainly won't be
    #simple, but should be as simple as possible.

    # Print such usage.
    print_string_colored "${ZESHY_COLOR_STYLE[print_usage.usage]}Usage${ZESHY_COLOR_STYLE[print_usage.usage_colon]}: ${ZESHY_COLOR_STYLE[print_usage.command_name]}zeshy ${ZESHY_COLOR_STYLE[print_usage.arg_brace]}[${ZESHY_COLOR_STYLE[print_usage.arg_name]}OPTION${ZESHY_COLOR_STYLE[print_usage.arg_brace]}]${ZESHY_COLOR_STYLE[print_usage.arg_ellipsis]}... ${ZESHY_COLOR_STYLE[print_usage.arg_brace]}[${ZESHY_COLOR_STYLE[print_usage.arg_name]}FILE ${ZESHY_COLOR_STYLE[print_usage.arg_brace]}[${ZESHY_COLOR_STYLE[print_usage.arg_name]}ARGUMENT${ZESHY_COLOR_STYLE[print_usage.arg_brace]}]${ZESHY_COLOR_STYLE[print_usage.arg_ellipsis]}...${ZESHY_COLOR_STYLE[print_usage.arg_brace]}]

${ZESHY_COLOR_STYLE[print_usage.usage_text]}Open a new zsh shell running Zeshy. If passed an optional FILE, source such path
as a Zeshy zsh shell script passed the passed ARGUMENTs.

${ZESHY_COLOR_STYLE[print_usage.heading_title]}Main options${ZESHY_COLOR_STYLE[print_usage.heading_colon]}:
  ${ZESHY_COLOR_STYLE[print_usage.option_dash]}-${ZESHY_COLOR_STYLE[print_usage.option_name]}i${ZESHY_COLOR_STYLE[print_usage.option_comma]}, ${ZESHY_COLOR_STYLE[print_usage.option_dash]}--${ZESHY_COLOR_STYLE[print_usage.option_name]}interactive      ${ZESHY_COLOR_STYLE[print_usage.option_text]}open an interactive non-login zsh shell
  ${ZESHY_COLOR_STYLE[print_usage.option_dash]}-${ZESHY_COLOR_STYLE[print_usage.option_name]}l${ZESHY_COLOR_STYLE[print_usage.option_comma]}, ${ZESHY_COLOR_STYLE[print_usage.option_dash]}--${ZESHY_COLOR_STYLE[print_usage.option_name]}login            ${ZESHY_COLOR_STYLE[print_usage.option_text]}open an interactive login zsh shell
  ${ZESHY_COLOR_STYLE[print_usage.option_dash]}-${ZESHY_COLOR_STYLE[print_usage.option_name]}h${ZESHY_COLOR_STYLE[print_usage.option_comma]}, ${ZESHY_COLOR_STYLE[print_usage.option_dash]}--${ZESHY_COLOR_STYLE[print_usage.option_name]}help             ${ZESHY_COLOR_STYLE[print_usage.option_text]}print this help string and exit
      ${ZESHY_COLOR_STYLE[print_usage.option_dash]}--${ZESHY_COLOR_STYLE[print_usage.option_name]}version          ${ZESHY_COLOR_STYLE[print_usage.option_text]}print a version string and exit
  ${ZESHY_COLOR_STYLE[print_usage.option_dash]}-${ZESHY_COLOR_STYLE[print_usage.option_comma]},  ${ZESHY_COLOR_STYLE[print_usage.option_dash]}--                 ${ZESHY_COLOR_STYLE[print_usage.option_text]}stop parsing options

${ZESHY_COLOR_STYLE[print_usage.heading_title]}Parameterized options${ZESHY_COLOR_STYLE[print_usage.heading_colon]}:
  ${ZESHY_COLOR_STYLE[print_usage.option_dash]}-${ZESHY_COLOR_STYLE[print_usage.option_name]}c ${ZESHY_COLOR_STYLE[print_usage.option_value]}COMMAND${ZESHY_COLOR_STYLE[print_usage.option_comma]},            ${ZESHY_COLOR_STYLE[print_usage.option_text]}run the passed Zeshy shell command (e.g., \"is_dir /\")
     ${ZESHY_COLOR_STYLE[print_usage.option_dash]}--${ZESHY_COLOR_STYLE[print_usage.option_name]}command${ZESHY_COLOR_STYLE[print_usage.option_equals]}=${ZESHY_COLOR_STYLE[print_usage.option_value]}COMMAND
  ${ZESHY_COLOR_STYLE[print_usage.option_dash]}-${ZESHY_COLOR_STYLE[print_usage.option_name]}o ${ZESHY_COLOR_STYLE[print_usage.option_value]}OPTION${ZESHY_COLOR_STYLE[print_usage.option_comma]},             ${ZESHY_COLOR_STYLE[print_usage.option_text]}enable the passed zsh shell option (\"man zshoptions\")
     ${ZESHY_COLOR_STYLE[print_usage.option_dash]}--${ZESHY_COLOR_STYLE[print_usage.option_name]}option${ZESHY_COLOR_STYLE[print_usage.option_equals]}=${ZESHY_COLOR_STYLE[print_usage.option_value]}OPTION

${ZESHY_COLOR_STYLE[print_usage.heading_title]}Startup options${ZESHY_COLOR_STYLE[print_usage.heading_colon]}:
  ${ZESHY_COLOR_STYLE[print_usage.option_dash]}-${ZESHY_COLOR_STYLE[print_usage.option_name]}v${ZESHY_COLOR_STYLE[print_usage.option_comma]}, ${ZESHY_COLOR_STYLE[print_usage.option_dash]}--${ZESHY_COLOR_STYLE[print_usage.option_name]}verbose          ${ZESHY_COLOR_STYLE[print_usage.option_text]}print debug statements during Zeshy startup
  ${ZESHY_COLOR_STYLE[print_usage.option_dash]}--${ZESHY_COLOR_STYLE[print_usage.option_name]}zeshy-dot-dir${ZESHY_COLOR_STYLE[print_usage.option_equals]}=${ZESHY_COLOR_STYLE[print_usage.option_value]}PATH   ${ZESHY_COLOR_STYLE[print_usage.option_text]}change Zeshy's dot directory (defaults to \"~/.zeshy\")
  ${ZESHY_COLOR_STYLE[print_usage.option_dash]}--${ZESHY_COLOR_STYLE[print_usage.option_name]}no-zeshy-dot-dir     ${ZESHY_COLOR_STYLE[print_usage.option_text]}ignore Zeshy's dot directory and files therein; hence,
                            run Zeshy with default settings and no digest file
  ${ZESHY_COLOR_STYLE[print_usage.option_dash]}--${ZESHY_COLOR_STYLE[print_usage.option_name]}compile-digest       ${ZESHY_COLOR_STYLE[print_usage.option_text]}recompile Zeshy's digest, even if up-to-date
  ${ZESHY_COLOR_STYLE[print_usage.option_dash]}--${ZESHY_COLOR_STYLE[print_usage.option_name]}compile-digest-if-zeshy-home-changed
                         ${ZESHY_COLOR_STYLE[print_usage.option_text]}recompile Zeshy's digest if Zeshy's codebase changed"
}

# --------------------( WASTELANDS                         )--------------------
