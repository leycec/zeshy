#!/usr/bin/env zsh
# --------------------( LICENSE                            )--------------------
# Copyright 2007-2013 by Cecil Curry.
# See "COPYING" for additional details.

declare_parcel_as_script_with_stdin <<'-/-'
Handle *float setters* (i.e., functions setting float variables).
-/-

# ....................{ SETTERS                            }....................
declare_function_with_stdin <<'/---'
void set_float_to_float(string float_name, float number)

Set the passed float variable to the passed float: e.g.,

.set_float_to_float()
==========================================
[source]
------------------------------------------
>>> float khinchins_constant
>>> set_float_to_float khinchins_constant 2.6854520010
>>> print_string "${khinchins_constant}"
2.6854520010
------------------------------------------
==========================================
/---
function set_float_to_float() {
    # Validate passed arguments.
    die_unless_args_2 'expected one float name and one float'
    string float_name__sftf="${1}"
    die_unless_variable_float "${float_name__sftf}"

    # Set such float.
    noop ${(P)float_name__sftf::=${2}}
}

# ....................{ SETTERS ~ stdin                    }....................
declare_function_with_stdin <<'/---'
void set_float_to_stdin[args: string float_name, stdin: float input]

Set the passed float variable to the entirety of standard input. For safety,
close standard input after doing so: e.g.,

.set_float_to_stdin()
==========================================
[source]
------------------------------------------
>>> float conways_constant
>>> set_float_to_stdin conways_constant <<<1.30357
>>> print_string "${conways_constant}"
1.30357
------------------------------------------
==========================================
/---
function set_float_to_stdin() {
    # Validate passed arguments.
    die_unless_arg 'expected one float name'
    die_if_stdin_empty

    # Set such float.
    set_float_to_float "${1}" "$(get_stdin)"

    # Close such input, ensuring is_stdin_nonempty() subsequently returns false.
    close_stdin
}

# --------------------( WASTELANDS                         )--------------------
