#!/usr/bin/env zsh
# ====================[ escape                             ]====================
#
# --------------------( LICENSE                            )--------------------
# Copyright 2007-2013 by Cecil Curry.
# See "COPYING" for additional details.
#
# --------------------( SYNOPSIS                           )--------------------
# Handle string escapes (i.e., shell-reserved characters preceded by "\").

# ....................{ ESCAPERS                           }....................
declare_function_with_stdin <<'________________<heredoc?>________________'
string escape_string(string text1, string text2, ...)

Escape all shell-reserved characters in the passed strings: e.g.,

.escape_string()
==========================================
[source]
------------------------------------------
>>> escape_string "(Three Rings)" "[for the]" "{Elven-kings}"
\(Three\ Rings\) \[for\ the\] \{Elven-kings\}
------------------------------------------
==========================================
________________<heredoc?>________________
function escape_string() {
    die_unless_args 'expected at least one string'
    print_string "${(q)*}"
}

declare_function_with_stdin <<'________________<heredoc?>________________'
string escape_string_double_quotes(string text1, string text2, ...)

Escape all double quotes in the passed strings: e.g.,

.escape_string_double_quotes()
==========================================
[source]
------------------------------------------
>>> escape_string_double_quotes 'I whispered, "I am too young,"'
I whispered, \"I am too young,\"
------------------------------------------
==========================================
________________<heredoc?>________________
function escape_string_double_quotes() {
    die_unless_args 'expected at least one string'
    replace_string_matches_with_string "${*}" '"' '\"'
}

# ....................{ ESCAPERS ~ path                    }....................
declare_function_with_stdin <<'________________<heredoc?>________________'
string escape_path_dir_separator(string pathname)

Escape all directory separators in the passed path, prefixing all forward
slashes in such path with a backslash. For safety, consider calling this
function when creating path basenames from unsafe sources (e.g., user input
possibly containing forward slashes): e.g.,

.escape_path_dir_separator()
==========================================
[source]
------------------------------------------
>>> string shibboleth="$(escape_path_dir_separator /fungi/from/yuggoth)"
>>> make_file "$(get_home)/${shibboleth}"
>>> list_path "$(get_home)/${shibboleth}"
/home/leycec/\/fungi\/from\/yuggoth
------------------------------------------
==========================================
________________<heredoc?>________________
function escape_string_dir_separator() {
    # Validate passed arguments.
    die_unless_arg 'expected one pathname'
    replace_string_matches_with_string "${1}" '/' '\/'
}

# --------------------( WASTELANDS                         )--------------------
