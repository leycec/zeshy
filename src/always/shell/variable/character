#!/usr/bin/env zsh
# ====================[ character                          ]====================
#
# --------------------( LICENSE                            )--------------------
# Copyright 2007-2012 by Cecil Curry.
# See "COPYING" for additional details.
#
# --------------------( SYNOPSIS                           )--------------------
# Handle character variables and values.

# ....................{ EXCEPTIONS                         }....................
#FIXME: Rename to die_unless_character(). (There might be a real
#"character" type, someday.)
document_function '
void die_unless_variable_character(
  string variable_name,
  string error_message = "\"${variable_name}\" not a character")

Throw an exception unless the passed variable is a character. See
is_variable_character() for further details.
'
function die_unless_variable_character() {
    die_unless_args_1_to_2\
        'expected one variable name and optional error message'
    string variable_name__duc="${1}"
    is_variable_character "${variable_name__duc}" or
        die "${2:-\"${variable_name__duc}\" not a character}"
}

# ....................{ TESTERS                            }....................
#FIXME: Rename to is_character().
document_function '
boolean is_variable_character(string variable_name)

Return true if the passed variable is a character (i.e., a string of length 1).
'
function is_variable_character() {
    # Validate passed arguments.
    die_unless_arg 'expected one variable name'
    string variable_name__ic="${1}"

    # Test the passed variable.
    is_variable_string "${variable_name__ic}" and
        (( $(get_string_length "${(P)variable_name__ic}") == 1 ))
}

# --------------------( WASTELANDS                         )--------------------
