#!/usr/bin/env zsh
# ====================[ gui                                ]====================
#
# --------------------( LICENSE                            )--------------------
# Copyright 2007-2012 by Cecil Curry.
# See "COPYING" for additional details.
#
# --------------------( SYNOPSIS                           )--------------------
# Define interactive aliases for installed GUI commands.

# ....................{ ADDERS                             }....................
# void add_interactive_gui_substitution(
#   string substitution_name1, string substitution_name2, ...)
#
# Add the passed strings to list global
# ${ZESHY_INTERACTIVE_GUI_SUBSTITUTION_NAMES}, to be subsequently defined by
# setup_interactive_gui_substitutions() as interactive substitutions running
# GUI commands (i.e., disowned from the current shell).
add_interactive_gui_substitution() {
    die_unless_args 'expected at least one substitution name'
    global_list_set ZESHY_INTERACTIVE_GUI_SUBSTITUTION_NAMES
    ZESHY_INTERACTIVE_GUI_SUBSTITUTION_NAMES+=( "${@}" )
}

# ....................{ SETUP                              }....................
# void setup_interactive_gui_substitutions(void)
#
# Define all interactive substitutions running GUI commands. Such substitutions
# either were previously added to
# ${ZESHY_INTERACTIVE_GUI_SUBSTITUTION_NAMES} by prior calls to
# add_interactive_gui_substitutions() or are hard-coded into this function.
setup_interactive_gui_substitutions() {
    # List of GUI command names in interactive substitution name format (e.g.,
    # embedding "{"- and "}"-delimited strings defining the corresponding
    # interactive abbreviation name).
    global_list_set ZESHY_INTERACTIVE_GUI_SUBSTITUTION_NAMES
    ZESHY_INTERACTIVE_GUI_SUBSTITUTION_NAMES+=(
        {abi}word                      # AbiWord Processor.
        {acr}oread                     # Adobe Acrobat.
        {am}arok                       # Amarok Music Player.
        {c}a{li}bre                    # Calibre eBook Manager.
        {ch}rom{e}                     # Google Chrome.
        {ch}romium                     # Google Chromium.
        dia                            # GNOME Dia.
        {f}ire{f}ox                    # Mozilla Firefox.
        {f}ire{li}ght                  # KDE Filelight.
        {fo}nt{fo}rge                  # FontForge.
        {ecl}ipse                      # Eclipse.
        {ema}cs                        # GNU Emacs.
        {g}ee{q}ie                     # Geeqie Image Viewer.
        {gim}p                         # GNU Image Manipulation Program.
        {gv}im                         # Graphical ViM.
        {ink}scape                     # Inkscape.
        kile                           # KDE Integrated LaTEX Environment.
        {kon}tact                      # KDE Kontact.
        {kto}rrent                     # KDE KTorrent.
        {l}ibre{o}ffice                # LibreOffice.
        {li}nks                        # Links Browser.
        lyx                            # LyX.
        {mp}layer2                     # Media Player.
        {n}et{b}eans                   # NetBeans.
        {ok}ular                       # KDE Okular.
        {oo}ffice                      # Apache OpenOffice.
        {pdfs}am                       # PDF Split and Merge.
        {pidg}en                       # Pidgin Chat Client.
        {pu}tty                        # PuTTY.
        {scr}ibus                      # Scribus.
        {t}hunder{bi}rd                # Mozilla Thunderbird.
        {t}or{b}rowser                 # Tor Browser.
        {ump}layer                     # Universal Media Player.
        vlc                            # VLC Media Player.
    )

    # For each such name, if such name stripped of "{"- and "}"-delimited
    # substrings produces a currently installed command name, define such name
    # to interactively expand to such command name "disowned" from the current
    # shell. GUI commands should almost always run "disowned" to prevent their
    # termination on termination of the parent shell.
    string command_name
    for subst_name ("${ZESHY_INTERACTIVE_GUI_SUBSTITUTION_NAMES[@]}") {
        command_name="${subst_name//[\{\}]}"
        is_installed "${command_name}" and interactive_substitution\
            ${subst_name}="run_disowned ${command_name}"
    }
}

# --------------------( WASTELANDS                         )--------------------
    #FIXME: Declare as a "global_list_set" here and below, to preserve uniqueness.
# as interactive substitutions running
# interactive substitutions for a subset of hard-coded GUI commands.
#FIXME: It'd be nice to permit users to dynamically add aliases to such list.
#Since we already helpfully use a global variable below, we need only add a few
#helper functions to enable this.

#Of course, this begins to raise awkward timing issues, as well... Ah. No; it
#doesn't, really.

# Unlike Zeshy Interactive Alias, this component need not reside under
# "00-setup". It does, however, need be imported after importing Zeshy
# Interactive Alias. Thus, its filename.
        # If such command is installed, define such substitution.
