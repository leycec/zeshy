#!/usr/bin/env zsh
# ====================[ udevadm                            ]====================
#
# --------------------( LICENSE                            )--------------------
# Copyright 2007-2013 by Cecil Curry.
# See "COPYING" for additional details.
#
# --------------------( SYNOPSIS                           )--------------------
# Handle udev, Linux's userspace device manager.

# ....................{ PRINTERS                           }....................
#FIXME: Rename to print_device_udev_metadata().
declare_function '
string print_udev_device(string device_filename)

Print "udev"-specific information for the passed device. This is especially
helpful for obtaining udev-associated "Product" and "Vendor" strings for a
device, with which you may then write custom udev, X.org, etc. rules for
dynamically configuring devices on "hot-plug."
'
function print_udev_device() {
    # Validate passed arguments.
    die_unless_arg 'expected one device filename'
    string device_filename="${1}"
    die_unless_device "${device_filename}"

    # Print such data.
    print_heading "udev device data for \"${device_filename}\""
    udevadm info --query=all --name="${device_filename}"
    print_heading "udev recursive attributes for \"${device_filename}\""
    udevadm info --attribute-walk --name="${device_filename}"
}

# --------------------( WASTELANDS                         )--------------------
#   run_command_as_superuser udevadm info --query=all --name="${device_file}"
#   run_command_as_superuser udevadm info --attribute-walk --name="${device_file}"
# ....................{ ALIASES                            }....................
#alias_cli udevdi="print_udev_device_info"
