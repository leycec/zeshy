#!/usr/bin/env zsh
# --------------------( LICENSE                            )--------------------
# Copyright 2007-2013 by Cecil Curry.
# See "COPYING" for additional details.

declare_parcel_as_script_with_stdin <<'/---'
Handle `vim`, the popular CLI editor.
/---

# ....................{ VIMMERS                            }....................
declare_function_with_stdin <<'/---'
[stdout: string, stderr: string, status: integer] vim_path_with_options:(
    string vim_option1?, ...,
    string pathname1?, ...)

Pass the passed paths to `vim` with both the passed and currently configured
`vim`-specific options (e.g., ${ZESHY_OPTIONS_VIM}).
/---
function vim_path_with_options:() {
    run_code_with_options_configured 'command vim'\
        'ZESHY_OPTIONS_VIM ZESHY_OPTIONS_VIM_UNDER_SERVER_NOT' "${(q)@}"
}

declare_function_with_stdin <<'/---'
[stdout: string, stderr: string, status: integer]
    vim_path_under_server_with_options:(
        string vim_option1?, ...,
        string pathname1?, ...,
        string server_name)

Pass the passed paths to `vim` with both the passed and currently configured
`vim`-specific options (e.g., ${ZESHY_OPTIONS_VIM}).
/---
function vim_path_under_server_with_options:() {
    # Validate sanity.
    die_unless_args\
        'Expected optional "vim" options, optional pathnames, and one server name.'
    string server_name="${@[-1]}"
    pop_arg

    # Vim such paths.
    run_code_with_options_configured\
        'command vim' 'ZESHY_OPTIONS_VIM' --servername "${server_name}" "${(q)@}"
}

# --------------------( WASTELANDS                         )--------------------
#    die_unless_args\
#        'Expected optional "vim" options and optional pathnames.'
