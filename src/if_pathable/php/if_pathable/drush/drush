#!/usr/bin/env zsh
# --------------------( LICENSE                            )--------------------
# Copyright 2007-2013 by Cecil Curry.
# See "COPYING" for additional details.

declare_parcel_as_script_with_stdin <<'-/-'
Handle Drush, a CLI utility for manipulating both local and remote Drupal sites.
-/-

#FIXME: Integrate "/usr/share/doc/drush-*/examples/example.bashrc.bz2", an
#absurdly complete bash-specific "drush" implementation -- including drush
#completions, aliases, functions, globals, and so on.

# ....................{ GETTERS                            }....................
declare_function_with_stdin <<'/---'
string get_drush_site_alias_first(void)

Get the first site alias defined by the first user-specific `drush`
configuration file (e.g., `~/.drush/aliases.drushrc.php`). If no such file
exists or defines such alias, an exception is thrown.
/---
function get_drush_site_alias_first() {
    # Validate sanity.
    die_if_args
    string config_filename
    config_filename="$(get_drush_config_file_site_aliases)"
    die_unless_file_text "${config_filename}"

    # Grep such file for such alias.
}

# ....................{ GETTERS ~ config                   }....................
declare_function_with_stdin <<'/---'
string get_drush_config_file_site_aliases(void)

Get the absolute path of the user-specific `drush` configuration file of site
aliases (e.g., `~/.drush/aliases.drushrc.php`).
/---
function get_drush_config_file_site_aliases() {
    #FIXME: There exist a number of possible configuration files defining such
    #aliases, of which this is merely the most common.
    die_if_args
    output_string "${HOME}/.drush/aliases.drushrc.php"
}

# --------------------( WASTELAND                          )--------------------
