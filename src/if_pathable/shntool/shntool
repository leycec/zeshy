#!/usr/bin/env zsh
# ====================[ shntool                            ]====================
#
# --------------------( LICENSE                            )--------------------
# Copyright 2007-2013 by Cecil Curry.
# See "COPYING" for additional details.
#
# --------------------( SYNOPSIS                           )--------------------
# Handling "shntool", a lossless audio file processor.

# ....................{ CONVERTERS                         }....................
declare_function '
void split_file_audio_lossless(
    string source_audio_filename,
    string source_split_points_filename =
        "$(get_path_sans_file_type ${audio_filename}).cue",
    string target_dir = "$(get_dir)")

Split the passed lossless audio file into smaller lossless audio files of the
same format in the passed target directory (defaulting to the current directory)
at all split points specified in the passed split points file (defaulting to the
passed audio file with filetype replaced by "cue"). This function internally
leverages "shntool" and hence supports all audio formats (e.g., FLAC, WAV) and
split point formats (e.g., CUE) "shntool" supports. See "man shntool" for
further details.

This function internally reimplements the "cuetag.sh" Bourne shell script
bundled with "cuetools" in pure Zeshy and hence does *NOT* require such script
to be in the current ${PATH}.
'
function split_file_audio_lossless() {
    # Validate passed arguments.
    die_unless_args_3\
        'expected one source audio filename, optional source split points filename, and optional target directory'
    die_unless_pathables flac metaflac shntool

    # Split such file.
    'command shnsplit'
}

# --------------------( WASTELANDS                         )--------------------
